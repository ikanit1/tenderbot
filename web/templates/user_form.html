{% extends "base.html" %}
{% block title %}Редактирование пользователя {{ user.id }} — TenderBot Admin{% endblock %}
{% block header_title %}Редактирование пользователя{% endblock %}
{% block content %}
<div class="page-header">
    <h2 class="page-title">Редактирование: {{ user.full_name }}</h2>
    <p class="page-subtitle">ID {{ user.id }}</p>
</div>
<div class="detail-actions">
    <a href="/users/{{ user.id }}" class="btn btn-secondary">← К карточке</a>
    <a href="/users" class="btn btn-ghost">К списку</a>
</div>
<div class="card">
    <form method="post" action="/users/{{ user.id }}/edit">
        <div class="form-group">
            <label class="form-label" for="full_name">ФИО</label>
            <input type="text" id="full_name" name="full_name" class="form-input" value="{{ user.full_name }}" required maxlength="200">
        </div>
        <div class="form-group">
            <label class="form-label" for="city">Город</label>
            <input type="text" id="city" name="city" class="form-input" value="{{ user.city }}" required maxlength="100">
        </div>
        <div class="form-group">
            <label class="form-label" for="phone">Телефон</label>
            <input type="text" id="phone" name="phone" class="form-input" value="{{ user.phone }}" required maxlength="30">
        </div>
        <div class="form-group">
            <label class="form-label">Роль</label>
            <select name="role" class="form-select" style="max-width: 200px;">
                {% for r in roles %}
                <option value="{{ r }}" {% if user.role == r %}selected{% endif %}>{{ r|translate_role }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-group">
            <label class="form-label">Статус</label>
            <select name="status" class="form-select" style="max-width: 200px;">
                {% for s in statuses %}
                <option value="{{ s }}" {% if user.status == s %}selected{% endif %}>{{ s|translate_status }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-group">
            <label class="form-label">Навыки (отметьте несколько)</label>
            <div style="display: flex; flex-wrap: wrap; gap: 0.5rem 1rem;">
                {% for tag in skill_tags %}
                <label class="form-check">
                    <input type="checkbox" name="skills" value="{{ tag }}" {% if user.skills and tag in user.skills %}checked{% endif %}>
                    {{ tag }}
                </label>
                {% endfor %}
            </div>
        </div>
        <div class="btn-group" style="margin-top: 1rem;">
            <button type="submit" class="btn btn-success">Сохранить</button>
            <a href="/users/{{ user.id }}" class="btn btn-secondary">Отмена</a>
        </div>
    </form>
</div>
{% endblock %}
