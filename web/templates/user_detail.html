{% extends "base.html" %}
{% block title %}–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {{ user.id }} ‚Äî TenderBot Admin{% endblock %}
{% block content %}
<h1>{{ user.full_name }}</h1>
<div style="margin-bottom: 1rem;">
    <a href="/users/{{ user.id }}/edit" style="padding: 0.5rem 1rem; background: #ffc107; color: black; text-decoration: none; border-radius: 4px; margin-right: 0.5rem;">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
    <a href="/users" style="padding: 0.5rem 1rem; background: #6c757d; color: white; text-decoration: none; border-radius: 4px;">‚Üê –ö —Å–ø–∏—Å–∫—É</a>
</div>

<div style="background: #f8f9fa; padding: 1rem; border-radius: 4px; margin-bottom: 1rem;">
    <p><strong>ID:</strong> {{ user.id }}</p>
    <p><strong>TG ID:</strong> {{ user.tg_id }}</p>
    <p><strong>–†–æ–ª—å:</strong> {{ user.role }}</p>
    <p><strong>–°—Ç–∞—Ç—É—Å:</strong> 
        {% if user.status == "active" %}<span style="color: green;">‚úÖ –ê–∫—Ç–∏–≤–µ–Ω</span>{% endif %}
        {% if user.status == "pending_moderation" %}<span style="color: orange;">‚è≥ –ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏</span>{% endif %}
        {% if user.status == "banned" %}<span style="color: red;">‚ùå –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω</span>{% endif %}
    </p>
    <p><strong>–ì–æ—Ä–æ–¥:</strong> {{ user.city }}</p>
    <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> {{ user.phone }}</p>
    {% if user.birth_date %}
    <p><strong>–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:</strong> {{ user.birth_date.strftime('%d.%m.%Y') }}</p>
    {% endif %}
    <p><strong>–ù–∞–≤—ã–∫–∏:</strong> {{ user.skills|join(", ") if user.skills else "‚Äî" }}</p>
    {% if user.created_at %}
    <p><strong>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</strong> {{ user.created_at.strftime('%d.%m.%Y %H:%M') }}</p>
    {% endif %}
</div>

{% if documents_list %}
<div style="background: #e7f3ff; padding: 1rem; border-radius: 4px; margin-bottom: 1rem; border: 1px solid #b6d4fe;">
    <h3>üìé –ê—Ä—Ö–∏–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
    <p>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ Telegram ID). –†–∞–∑—Ä–µ—à–µ–Ω—ã: —Ñ–æ—Ç–æ (JPEG, PNG), PDF. –ü–æ—Å–ª–µ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å.</p>
    {% for doc in documents_list %}
    <p style="margin: 0.5rem 0;">
        {% if doc.type == "photo" %}
        <a href="/users/by-tg/{{ user.tg_id }}/document?index={{ loop.index0 }}" target="_blank" rel="noopener" style="padding: 0.5rem 1rem; background: #0d6efd; color: white; text-decoration: none; border-radius: 4px;">üñºÔ∏è –§–æ—Ç–æ {{ loop.index }}</a>
        {% else %}
        <a href="/users/by-tg/{{ user.tg_id }}/document?index={{ loop.index0 }}" target="_blank" rel="noopener" style="padding: 0.5rem 1rem; background: #0d6efd; color: white; text-decoration: none; border-radius: 4px;">üìÑ –î–æ–∫—É–º–µ–Ω—Ç {{ loop.index }}</a>
        {% if doc.file_name %}<span style="color: #666;"> ‚Äî {{ doc.file_name }}</span>{% endif %}
        {% endif %}
    </p>
    {% endfor %}
    <form method="post" action="/users/{{ user.id }}/documents/delete" style="margin-top: 0.75rem;" onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã —É —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è? –°—Å—ã–ª–∫–∏ –Ω–∞ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã.');">
        <button type="submit" style="padding: 0.5rem 1rem; background: #dc3545; color: white; border: none; cursor: pointer; border-radius: 4px;">üóë –£–¥–∞–ª–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã</button>
    </form>
</div>
{% endif %}

<div style="margin-bottom: 1rem;">
    <h3>–î–µ–π—Å—Ç–≤–∏—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏:</h3>
    {% if user.status == "pending_moderation" %}
    <form method="post" action="/users/{{ user.id }}/approve" style="display: inline-block;">
        <button type="submit" style="padding: 0.5rem 1rem; background: #28a745; color: white; border: none; cursor: pointer; border-radius: 4px;">‚úÖ –û–¥–æ–±—Ä–∏—Ç—å</button>
    </form>
    <form method="post" action="/users/{{ user.id }}/reject" style="display: inline-block; margin-left: 0.5rem;">
        <button type="submit" style="padding: 0.5rem 1rem; background: #dc3545; color: white; border: none; cursor: pointer; border-radius: 4px;">‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å</button>
    </form>
    {% elif user.status == "banned" %}
    <form method="post" action="/users/{{ user.id }}/unban" style="display: inline-block;">
        <button type="submit" style="padding: 0.5rem 1rem; background: #28a745; color: white; border: none; cursor: pointer; border-radius: 4px;">üîì –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å</button>
    </form>
    {% elif user.status == "active" %}
    <form method="post" action="/users/{{ user.id }}/ban" style="display: inline-block;">
        <button type="submit" style="padding: 0.5rem 1rem; background: #dc3545; color: white; border: none; cursor: pointer; border-radius: 4px;">üö´ –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å</button>
    </form>
    {% endif %}
    <form method="post" action="/users/{{ user.id }}/delete" style="display: inline-block; margin-left: 1rem;" onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ? –û—Ç–∫–ª–∏–∫–∏, —Ç–∏–∫–µ—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏ –æ—Ç–∑—ã–≤—ã –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã.');">
        <button type="submit" style="padding: 0.5rem 1rem; background: #343a40; color: white; border: none; cursor: pointer; border-radius: 4px;">üóë –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</button>
    </form>
</div>
{% endblock %}
