{% extends "base.html" %}
{% block title %}–î–∞—à–±–æ—Ä–¥ ‚Äî TenderBot Admin{% endblock %}
{% block header_title %}–î–∞—à–±–æ—Ä–¥{% endblock %}
{% block content %}
<div class="page-header">
    <h2 class="page-title">–î–∞—à–±–æ—Ä–¥</h2>
    <p class="page-subtitle">–°–≤–æ–¥–∫–∞ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º, —Ç–µ–Ω–¥–µ—Ä–∞–º –∏ –æ—Ç–∫–ª–∏–∫–∞–º</p>
</div>

<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-card-icon primary">üë•</div>
        <p class="stat-card-value">{{ users_total }}</p>
        <p class="stat-card-label">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</p>
    </div>
    <div class="stat-card">
        <div class="stat-card-icon info">üìã</div>
        <p class="stat-card-value">{{ tenders_total }}</p>
        <p class="stat-card-label">–¢–µ–Ω–¥–µ—Ä–æ–≤</p>
    </div>
    <div class="stat-card">
        <div class="stat-card-icon success">üì©</div>
        <p class="stat-card-value">{{ apps_today }}</p>
        <p class="stat-card-label">–û—Ç–∫–ª–∏–∫–æ–≤ —Å–µ–≥–æ–¥–Ω—è</p>
    </div>
    <div class="stat-card">
        <div class="stat-card-icon warning">üìä</div>
        <p class="stat-card-value">{{ apps_week }}</p>
        <p class="stat-card-label">–û—Ç–∫–ª–∏–∫–æ–≤ –∑–∞ –Ω–µ–¥–µ–ª—é</p>
    </div>
</div>

<div class="detail-grid">
    <div class="card">
        <h3 class="card-title">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ —Ä–æ–ª—è–º</h3>
        <ul class="list-compact">
            {% for row in users_by_role %}
            <li><span>{{ row[0]|translate_role }}</span><span class="badge badge-neutral">{{ row[1] }}</span></li>
            {% endfor %}
        </ul>
    </div>
    <div class="card">
        <h3 class="card-title">–¢–µ–Ω–¥–µ—Ä—ã –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º</h3>
        <ul class="list-compact">
            {% for row in tenders_by_status %}
            <li><span>{{ row[0]|translate_status }}</span><span class="badge badge-neutral">{{ row[1] }}</span></li>
            {% endfor %}
        </ul>
    </div>
</div>

<div class="card">
    <h3 class="card-title">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h3>
    <div class="table-wrap">
        <table class="table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>–§–ò–û</th>
                    <th>–†–æ–ª—å</th>
                    <th>–°—Ç–∞—Ç—É—Å</th>
                    <th>–ì–æ—Ä–æ–¥</th>
                </tr>
            </thead>
            <tbody>
                {% for u in recent_users %}
                <tr>
                    <td><a href="/users/{{ u.id }}">{{ u.id }}</a></td>
                    <td><a href="/users/{{ u.id }}">{{ u.full_name }}</a></td>
                    <td><span class="badge badge-neutral">{{ u.role|translate_role }}</span></td>
                    <td><span class="badge {% if u.status == 'active' %}badge-success{% elif u.status == 'pending_moderation' %}badge-warning{% else %}badge-danger{% endif %}">{{ u.status|translate_status }}</span></td>
                    <td>{{ u.city }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <p class="card-body">
        <a href="/users" class="btn btn-secondary btn-sm">–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</a>
        <a href="/tenders" class="btn btn-ghost btn-sm">–¢–µ–Ω–¥–µ—Ä—ã</a>
        <a href="/applications" class="btn btn-ghost btn-sm">–û—Ç–∫–ª–∏–∫–∏</a>
        <a href="/reviews" class="btn btn-ghost btn-sm">–û—Ç–∑—ã–≤—ã</a>
        <a href="/support" class="btn btn-ghost btn-sm">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</a>
    </p>
</div>

<div class="card">
    <h3 class="card-title">–ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ç–µ–Ω–¥–µ—Ä—ã</h3>
    <div class="table-wrap">
        <table class="table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                    <th>–ì–æ—Ä–æ–¥</th>
                    <th>–°—Ç–∞—Ç—É—Å</th>
                </tr>
            </thead>
            <tbody>
                {% for t in recent_tenders %}
                <tr>
                    <td><a href="/tenders/{{ t.id }}">{{ t.id }}</a></td>
                    <td><a href="/tenders/{{ t.id }}">{{ t.title }}</a></td>
                    <td>{{ t.city }}</td>
                    <td><span class="badge badge-neutral">{{ t.status|translate_status }}</span></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <p class="card-body">
        <a href="/tenders" class="btn btn-secondary btn-sm">–í—Å–µ —Ç–µ–Ω–¥–µ—Ä—ã</a>
    </p>
</div>
{% endblock %}
