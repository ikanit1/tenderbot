{% extends "base.html" %}
{% block title %}{% if tender %}Редактирование тендера{% else %}Создание тендера{% endif %} — TenderBot Admin{% endblock %}
{% block header_title %}{% if tender %}Редактирование тендера{% else %}Создание тендера{% endif %}{% endblock %}
{% block content %}
<div class="page-header">
    <h2 class="page-title">{% if tender %}Редактирование тендера{% else %}Создание тендера{% endif %}</h2>
    <p class="page-subtitle">{% if tender %}ID {{ tender.id }}{% else %}Новый тендер{% endif %}</p>
</div>
<div class="card">
    <form method="post" action="{% if tender %}/tenders/{{ tender.id }}/edit{% else %}/tenders/create{% endif %}">
        <div class="form-group">
            <label class="form-label" for="title">Название</label>
            <input type="text" id="title" name="title" class="form-input" value="{% if tender %}{{ tender.title }}{% endif %}" required>
        </div>
        <div class="form-group">
            <label class="form-label" for="category">Категория</label>
            <select id="category" name="category" class="form-select" required>
                <option value="">Выберите категорию</option>
                {% for tag in skill_tags %}
                <option value="{{ tag }}" {% if tender and tender.category == tag %}selected{% endif %}>{{ tag }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-group">
            <label class="form-label" for="city">Город</label>
            <input type="text" id="city" name="city" class="form-input" value="{% if tender %}{{ tender.city }}{% endif %}" required>
        </div>
        <div class="form-group">
            <label class="form-label" for="budget">Бюджет</label>
            <input type="text" id="budget" name="budget" class="form-input" value="{% if tender %}{{ tender.budget or '' }}{% endif %}" placeholder="Например: 100 000 руб">
        </div>
        <div class="form-group">
            <label class="form-label" for="description">Описание</label>
            <textarea id="description" name="description" class="form-textarea" required>{% if tender %}{{ tender.description }}{% endif %}</textarea>
        </div>
        <div class="form-group">
            <label class="form-label" for="deadline">Дедлайн (необязательно)</label>
            <input type="datetime-local" id="deadline" name="deadline" class="form-input" value="{% if tender and tender.deadline %}{{ tender.deadline.strftime('%Y-%m-%dT%H:%M') }}{% endif %}" style="max-width: 280px;">
        </div>
        {% if tender %}
        <div class="form-group">
            <label class="form-label" for="status">Статус</label>
            <select id="status" name="status" class="form-select" style="max-width: 200px;" required>
                {% for s in statuses %}
                <option value="{{ s }}" {% if tender.status == s %}selected{% endif %}>{{ s|translate_status }}</option>
                {% endfor %}
            </select>
        </div>
        {% endif %}
        <div class="btn-group" style="margin-top: 1rem;">
            <button type="submit" class="btn btn-primary">
                {% if tender %}Сохранить{% else %}Создать{% endif %}
            </button>
            <a href="{% if tender %}/tenders/{{ tender.id }}{% else %}/tenders{% endif %}" class="btn btn-secondary">Отмена</a>
        </div>
    </form>
</div>
{% endblock %}
